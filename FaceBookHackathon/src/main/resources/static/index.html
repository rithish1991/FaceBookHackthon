<!DOCTYPE html>
<html xmlns:th="https://thymeleaf.org">  

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"><
    <title>Olive the Bot</title>
    <style>
        @import url(https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700);

        * {
            box-sizing: border-box;
        }

        html {
            background: rgba(0, 0, 0, 0.03);
        }

        body,
        html {
            height: 100%;
        }

        body {
            font-family: 'Source Sans Pro', sans-serif;
            font-size: 115%;
            display: flex;
            flex-direction: column;
            max-width: 700px;
            margin: 0 auto;
        }

        .chat-output {
            flex: 1;
            padding: 20px;
            display: flex;
            background: white;
            flex-direction: column;
            height: 100px;
            overflow: scroll;
        }

        .chat-output>div {
            margin: 0 0 20px 0;
        }

        .chat-output .user-message .message {
            background: #0fb0df;
            color: white;
        }

        .chat-output .bot-message {
            text-align: right;
        }

        .chat-output .bot-message .message {
            background: #eee;
        }

        .chat-output .message {
            display: inline-block;
            padding: 12px 20px;
            border-radius: 10px;
        }

        .chat-input {
            padding: 20px;
            background: #eee;
            border: 1px solid #ccc;
            border-bottom: 0;
        }
	
	
	
	
        .chat-input .user-input {
            width: 100%;
            font-size: 2rem;
            border: 1px solid #ccc;
            border-radius: 4px;
            padding: 8px;
        }
        
   .meter { 
    height: 50px;
    position: relative;
    background: #f3efe6;
    overflow: hidden;
    border-radius: 12px;
}

.meter span {
    display: block;
    height: 100%;
}

.progress {
    background-color: #4CAF50;
    animation: progressBar 3s ease-in-out;
    animation-fill-mode:both; 
}

@keyframes progressBar {
  0% { width: 0; }
  100% { width: 100%; }
}
 
 .fa {
  padding: 20px;
  font-size: 30px;
  width: 50px;
  text-align: center;
  text-decoration: none;
  margin: 5px 2px;
}

.fa:hover {
    opacity: 0.7;
}

.fa-facebook {
  background: #3B5998;
  color: white;
}

 	

        
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    
</head>

<body>
 
 
    <div class="chat-output" id="chat-output">
        <div class="user-message">
        <div class="message" style="background-color: #ffb84d;color: black;">
Hey, I am Olive the Bot. I am here to help you relieve your stress. We have a set of 7 challenges for you and once you finish your challenges you will be given a surprise from me.        
        </div>
         
            
        </div>
         <div class="user-message">
         
      
             <div class="message" style="background-color: #ffff66; color: black;">
              Disclaimer –<br/>
         1)Prefer using Chrome or Mozilla Firefox or Safari browser <br/>
       
            2)Upload images less than 3mb in size<br/>
            3) You have to complete all the 7 challenges in order to get the surprise<br/>
            4) Remember to add on your feedback after every task which will help me to read your mind better<br/>
           
           
            </div>
            <br/><br/>
            <div class="message">This will be fun!!! Do you wish to proceed?
            </div>
        </div>
    </div>

    <div class="chat-input">
        <form action="#0" id="user-input-form">
            <input type="text" id="user-input" class="user-input" placeholder="Talk to the bot.">
	
        </form>
    </div>

    <script>
    $(document).ready( function() {
        var outputArea = $("#chat-output");
        var challengeQuestionCount = 0;
        var confidenceMeter = 0;
        var sessionId = "";
        var formData = new FormData();
        //formData.append('file1', $('#fileUploadchallengeOne')[0].files[0]);
        //formData.append('fil', "1");
        	 
        $("#user-input-form").on("submit", function (e) {
        	 e.preventDefault();
           if(challengeQuestionCount == 0)
        	{
            $("#user-input").attr("disabled", true);
            var message = $("#user-input").val();
            $("#user-input").val("");
            outputArea.append(`
                <div class='bot-message'>
                <div class='message'>
                    ${message}
                </div>
                </div>
            `);

           
    
             

	$.ajax({
    url: 'https://young-cove-81657.herokuapp.com/yesno',
    headers: {
        'Content-Type': 'application/json',
	
    },
    type: "POST", /* or type:"GET" or type:"PUT" */
    dataType: "json",
     crossDomain: true,
    data: JSON.stringify({"text":message }),
	success: function (result) {
		
		console.log(result);
		var data = result.yesOrNo;
		var confidence = result.confidence;
		
		if(confidence == "NA" || confidence <0.5 )
		{
		
		outputArea.append(`
                <div class='user-message'>
                <div class='message'>
                I am still learning. Could you be more specific?

                </div>
                </div>
            `);
		$("#user-input").attr("disabled", false);
		}
		
		else if(data === "Yes") 
			{
			
			
			 outputArea.append(`
		                <div class='user-message'>
		                <div class='message'>
		                Are you ready for the challenge 1!!!?
		                </div>
		               
		                </div>
		            `);
			 
			 challengeQuestionCount++;
			 $("#user-input").attr("disabled", false);
			
			}
		else if(data === "No")
			{
			
			 outputArea.append(`
		                <div class='user-message'>
		                <div class='message'>
		                Your Welcome  Kindly close the browser
		                </div>
		                </div>
		            `);
			}
		else
			{
			 $("#user-input").attr("disabled", false);
			outputArea.append(`
	                <div class='user-message'>
	                <div class='message'>
	                I am still learning. Could you be more specific?

	                </div>
	                </div>
	            `);
			}

    },
    error: function () {
        alert("error");
    }
})

     }	//question  discalaimaer

     
     
     	//Question 1
           if(challengeQuestionCount == 1)
      	 	{
           $("#user-input").attr("disabled", true);
           var message = $("#user-input").val();
           $("#user-input").val("");
           outputArea.append(`
               <div class='bot-message'>
               <div class='message'>
                   ${message}
               </div>
               </div>
           `);

          
   
            

	$.ajax({
   url: 'https://young-cove-81657.herokuapp.com/yesno',
   headers: {
       'Content-Type': 'application/json',
	
   },
   type: "POST", /* or type:"GET" or type:"PUT" */
   dataType: "json",
    crossDomain: true,
   data: JSON.stringify({"text":message }),
	success: function (result) {
		
		console.log(result);
		var data = result.yesOrNo;
		var confidence = result.confidence;
		
		if(confidence == "NA" || confidence <0.5 )
		{
		
		outputArea.append(`
                <div class='user-message'>
                <div class='message'>
                I am still learning. Could you be more specific?

                </div>
                </div>
            `);
		$("#user-input").attr("disabled", false);
		}
		else if(data === "Yes") 
			{
			
			
			outputArea.append(`
	                <div class='user-message'>
					
	                <div class='message' style='background-color: #9ae5e5; color: black;'>
	                “When you arise in the morning, think of what a precious privilege it is to be alive-to breathe, to think, to enjoy, to love.” -Marcus Aurelius
	                <br/><br/>
	                Take a selfie early in the morning with a Tea/Coffee having sun at the background
	                </div>
	                <br/><br/>
					<div>
					  <input type="file" id="fileUploadchallengeOne" accept="image/x-png,image/gif,image/jpeg" style="display:none;"> 
					  <button id="buttonChallengeOne">Upload Selfie with sunshine</button>  
					  <span id="fileName"></span>
					</div>
	                </div>
	            `);
			 
			
			
			}
		else if(data === "No")
			{
			
			 outputArea.append(`
		                <div class='user-message'>
		                <div class='message'>
		                Your Welcome  Kindly close the browser
		                </div>
		                </div>
		            `);
			}
		else
			{
			 $("#user-input").attr("disabled", false);
			outputArea.append(`
	                <div class='user-message'>
	                <div class='message'>
	                I am still learning. Could you be more specific?

	                </div>
	                </div>
	            `);
			}

   },
   error: function () {
       alert("error");
   }
})

    }	//question  one

  //Question 2
    if(challengeQuestionCount == 2)
	 {
    $("#user-input").attr("disabled", true);
    var message = $("#user-input").val();
    $("#user-input").val("");
    outputArea.append(`
        <div class='bot-message'>
        <div class='message'>
            ${message}
        </div>
        </div>
    `);

   

     

$.ajax({
url: 'https://young-cove-81657.herokuapp.com/sentiment',
headers: {
'Content-Type': 'application/json',

},
type: "POST", /* or type:"GET" or type:"PUT" */
dataType: "json",
crossDomain: true,
data: JSON.stringify({"text":message }),
success: function (result) {
	
	console.log(result);
	var confidence = result.confidence;
	var sentiment  = result.sentiment;
	if(confidence == "N/A" || confidence <0.5 )
		{
		
		outputArea.append(`
                <div class='user-message'>
                <div class='message'>
                I am still learning. Could you be more specific?

                </div>
                </div>
            `);
		$("#user-input").attr("disabled", false);
		}
	else if(sentiment =="positive")
		{
		confidenceMeter +=3;
		challengeQuestionCount++;
		outputArea.append(`
                <div class='user-message'>
                <div class='message'>
               Are you excited to take second challenge!!?
                </div>
                </div>
            `);
		$("#user-input").attr("disabled", false);
		
		
		}
	else if(sentiment =="negative")
		{
		 $("#user-input").attr("disabled", false);
		confidenceMeter +=1;
		outputArea.append(`
                <div class='user-message'>
                <div class='message'>
             Sorry if you didn't like the previous challenge. 	
             We will try to bring more interesting challenges  
                </div>
                </div>
            `);
		outputArea.append(`
                <div class='user-message'>
                <div class='message'>
               Are you excited to take second challenge!!?
                </div>
                </div>
            `);
		$("#user-input").attr("disabled", false);
		challengeQuestionCount++;
		}
	else if(sentiment == "neutral")
		{
		confidenceMeter +=2;
		challengeQuestionCount++;
		outputArea.append(`
                <div class='user-message'>
                <div class='message'>
               Are you excited to take second challenge!!?
                </div>
                </div>
            `);
		$("#user-input").attr("disabled", false);
		}
	console.log(confidenceMeter);

},
error: function () {
alert("error");
}
})

}	//question  two   

 //Challenge 2   
//Question 3
if(challengeQuestionCount == 3)
	{
$("#user-input").attr("disabled", true);
var message = $("#user-input").val();
$("#user-input").val("");
outputArea.append(`
    <div class='bot-message'>
    <div class='message'>
        ${message}
    </div>
    </div>
`);



 

$.ajax({
url: 'https://young-cove-81657.herokuapp.com/yesno',
headers: {
'Content-Type': 'application/json',

},
type: "POST", /* or type:"GET" or type:"PUT" */
dataType: "json",
crossDomain: true,
data: JSON.stringify({"text":message }),
success: function (result) {

console.log(result);
var data = result.yesOrNo;
var confidence = result.confidence;

if(confidence == "NA" || confidence <0.5 )
{

outputArea.append(`
     <div class='user-message'>
     <div class='message'>
     I am still learning. Could you be more specific?

     </div>
     </div>
 `);
$("#user-input").attr("disabled", false);
}
else if(data === "Yes") 
	{
	
	
	outputArea.append(`
         <div class='user-message'>
			
         <div class='message' style='background-color: #9ae5e5; color: black;'>
         "Until one has loved an animal, a part of one's soul remains unawakened." ― Anatole France
         <br/><br/>
         Feed any bird / animal and take a picture of it
         </div>
         <br/><br/>
			<div>
			  <input type="file" id="fileUploadchallengeTwo" accept="image/x-png,image/gif,image/jpeg" style="display:none;"> 
			  <button id="buttonChallengeTwo">Upload Picture of Bird/Animal you fed</button>  
			  <span id="fileName"></span>
			</div>
         </div>
     `);
	 
	
	
	}
else if(data === "No")
	{
	
	 outputArea.append(`
             <div class='user-message'>
             <div class='message'>
             Your Welcome  Kindly close the browser
             </div>
             </div>
         `);
	}
else
	{
	 $("#user-input").attr("disabled", false);
	outputArea.append(`
         <div class='user-message'>
         <div class='message'>
         I am still learning. Could you be more specific?

         </div>
         </div>
     `);
	}

},
error: function () {
alert("error");
}
})

}	//question  3 
 
 
 
//Question 4
if(challengeQuestionCount == 4)
 {
$("#user-input").attr("disabled", true);
var message = $("#user-input").val();
$("#user-input").val("");
outputArea.append(`
    <div class='bot-message'>
    <div class='message'>
        ${message}
    </div>
    </div>
`);



 

$.ajax({
url: 'https://young-cove-81657.herokuapp.com/sentiment',
headers: {
'Content-Type': 'application/json',

},
type: "POST", /* or type:"GET" or type:"PUT" */
dataType: "json",
crossDomain: true,
data: JSON.stringify({"text":message }),
success: function (result) {

console.log(result);
var confidence = result.confidence;
var sentiment  = result.sentiment;
if(confidence == "N/A" || confidence <0.5 )
	{
	
	outputArea.append(`
            <div class='user-message'>
            <div class='message'>
            I am still learning. Could you be more specific?

            </div>
            </div>
        `);
	$("#user-input").attr("disabled", false);
	}
else if(sentiment =="positive")
	{
	confidenceMeter +=3;
	challengeQuestionCount++;
	outputArea.append(`
            <div class='user-message'>
            <div class='message'>
           Are you excited to take third challenge!!?
            </div>
            </div>
        `);
	$("#user-input").attr("disabled", false);
	
	
	}
else if(sentiment =="negative")
	{
	confidenceMeter +=1;
	 $("#user-input").attr("disabled", false);
	outputArea.append(`
            <div class='user-message'>
            <div class='message'>
         Sorry if you didn't like the previous challenge. 	
         We will try to bring more interesting challenges  
            </div>
            </div>
        `);
	outputArea.append(`
            <div class='user-message'>
            <div class='message'>
           Are you excited to take third challenge!!?
            </div>
            </div>
        `);
	challengeQuestionCount++;
	}
else if(sentiment == "neutral")
	{
	confidenceMeter +=2;
	challengeQuestionCount++;
	outputArea.append(`
            <div class='user-message'>
            <div class='message'>
           Are you excited to take third challenge!!?
            </div>
            </div>
        `);
	$("#user-input").attr("disabled", false);
	}
console.log(confidenceMeter);

},
error: function () {
alert("error");
}
})

}
// end of Challenge 3  



//Challenge 4
//Question 5
if(challengeQuestionCount == 5)
	{
$("#user-input").attr("disabled", true);
var message = $("#user-input").val();
$("#user-input").val("");
outputArea.append(`
    <div class='bot-message'>
    <div class='message'>
        ${message}
    </div>
    </div>
`);



 

$.ajax({
url: 'https://young-cove-81657.herokuapp.com/yesno',
headers: {
'Content-Type': 'application/json',

},
type: "POST", /* or type:"GET" or type:"PUT" */
dataType: "json",
crossDomain: true,
data: JSON.stringify({"text":message }),
success: function (result) {

console.log(result);
var data = result.yesOrNo;
var confidence = result.confidence;

if(confidence == "NA" || confidence <0.5 )
{

outputArea.append(`
     <div class='user-message'>
     <div class='message'>
     I am still learning. Could you be more specific?

     </div>
     </div>
 `);
$("#user-input").attr("disabled", false);
}
else if(data === "Yes") 
	{
	
	
	outputArea.append(`
         <div class='user-message'>
			
         <div class='message' style='background-color: #9ae5e5; color: black;'>
         "If you’ve never experienced the joy of accomplishing more than you can imagine, plant a garden". – Robert Brault
         <br/><br/>
         Plant any green and take a selfie with it
         </div>
         <br/><br/>
			<div>
			  <input type="file" id="fileUploadchallengeThree" accept="image/x-png,image/gif,image/jpeg" style="display:none;"> 
			  <button id="buttonChallengeThree">Upload Picture of the green you planted</button>  
			  <span id="fileName"></span>
			</div>
         </div>
     `);
	 
	
	
	}
else if(data === "No")
	{
	
	 outputArea.append(`
             <div class='user-message'>
             <div class='message'>
             Your Welcome  Kindly close the browser
             </div>
             </div>
         `);
	}
else
	{
	 $("#user-input").attr("disabled", false);
	outputArea.append(`
         <div class='user-message'>
         <div class='message'>
         I am still learning. Could you be more specific?

         </div>
         </div>
     `);
	}

},
error: function () {
alert("error");
}
})

}	//question  4
 
 
 
//Question 5
if(challengeQuestionCount == 6)
 {
$("#user-input").attr("disabled", true);
var message = $("#user-input").val();
$("#user-input").val("");
outputArea.append(`
    <div class='bot-message'>
    <div class='message'>
        ${message}
    </div>
    </div>
`);



 

$.ajax({
url: 'https://young-cove-81657.herokuapp.com/sentiment',
headers: {
'Content-Type': 'application/json',

},
type: "POST", /* or type:"GET" or type:"PUT" */
dataType: "json",
crossDomain: true,
data: JSON.stringify({"text":message }),
success: function (result) {

console.log(result);
var confidence = result.confidence;
var sentiment  = result.sentiment;
if(confidence == "N/A" || confidence <0.5 )
	{
	
	outputArea.append(`
            <div class='user-message'>
            <div class='message'>
            I am still learning. Could you be more specific?

            </div>
            </div>
        `);
	$("#user-input").attr("disabled", false);
	}
else if(sentiment =="positive")
	{
	confidenceMeter +=3;
	challengeQuestionCount++;
	outputArea.append(`
            <div class='user-message'>
            <div class='message'>
           Are you excited to take fourth challenge!!?
            </div>
            </div>
        `);
	$("#user-input").attr("disabled", false);
	
	
	}
else if(sentiment =="negative")
	{
	 $("#user-input").attr("disabled", false);
	confidenceMeter +=1;
	outputArea.append(`
            <div class='user-message'>
            <div class='message'>
         Sorry if you didn't like the previous challenge. 	
         We will try to bring more interesting challenges  
            </div>
            </div>
        `);
	outputArea.append(`
            <div class='user-message'>
            <div class='message'>
           Are you excited to take fourth challenge!!?
            </div>
            </div>
        `);
	 $("#user-input").attr("disabled", false);
	 challengeQuestionCount++;
	}
else if(sentiment == "neutral")
	{
	confidenceMeter +=2;
	challengeQuestionCount++;
	outputArea.append(`
            <div class='user-message'>
            <div class='message'>
           Are you excited to take fourth challenge!!?
            </div>
            </div>
        `);
	$("#user-input").attr("disabled", false);
	}
console.log(confidenceMeter);

},
error: function () {
alert("error");
}
})

}
// end of Challenge 3   



//Challenge 4
//Question 6
if(challengeQuestionCount == 7)
	{
$("#user-input").attr("disabled", true);
var message = $("#user-input").val();
$("#user-input").val("");
outputArea.append(`
    <div class='bot-message'>
    <div class='message'>
        ${message}
    </div>
    </div>
`);



 

$.ajax({
url: 'https://young-cove-81657.herokuapp.com/yesno',
headers: {
'Content-Type': 'application/json',

},
type: "POST", /* or type:"GET" or type:"PUT" */
dataType: "json",
crossDomain: true,
data: JSON.stringify({"text":message }),
success: function (result) {

console.log(result);
var data = result.yesOrNo;
var confidence = result.confidence;

if(confidence == "NA" || confidence <0.5 )
{

outputArea.append(`
     <div class='user-message'>
     <div class='message'>
     I am still learning. Could you be more specific?

     </div>
     </div>
 `);
$("#user-input").attr("disabled", false);
}
else if(data === "Yes") 
	{
	
	
	outputArea.append(`
         <div class='user-message'>
			
         <div class='message' style='background-color: #9ae5e5; color: black;'>
         “I visited many places, Some of them quite Exotic and far away, But I always returned to myself.” ― Dejan Stojanovic
         <br/><br/>
         Take a picture of a place which you like the most in your locality and share it with us
         </div>
         <br/><br/>
			<div>
			  <input type="file" id="fileUploadchallengeFour" accept="image/x-png,image/gif,image/jpeg" style="display:none;"> 
			  <button id="buttonChallengeFour">Upload picture of your favourite spot</button>  
			  <span id="fileName"></span>
			</div>
         </div>
     `);
	 
	
	
	}
else if(data === "No")
	{
	
	 outputArea.append(`
             <div class='user-message'>
             <div class='message'>
             Your Welcome  Kindly close the browser
             </div>
             </div>
         `);
	}
else
	{
	 $("#user-input").attr("disabled", false);
	outputArea.append(`
         <div class='user-message'>
         <div class='message'>
         I am still learning. Could you be more specific?

         </div>
         </div>
     `);
	}

},
error: function () {
alert("error");
}
})

}	//question  4
 
 
 
//Question 7
if(challengeQuestionCount == 8)
 {
$("#user-input").attr("disabled", true);
var message = $("#user-input").val();
$("#user-input").val("");
outputArea.append(`
    <div class='bot-message'>
    <div class='message'>
        ${message}
    </div>
    </div>
`);



 

$.ajax({
url: 'https://young-cove-81657.herokuapp.com/sentiment',
headers: {
'Content-Type': 'application/json',

},
type: "POST", /* or type:"GET" or type:"PUT" */
dataType: "json",
crossDomain: true,
data: JSON.stringify({"text":message }),
success: function (result) {

console.log(result);
var confidence = result.confidence;
var sentiment  = result.sentiment;
if(confidence == "N/A" || confidence <0.5 )
	{
	
	outputArea.append(`
            <div class='user-message'>
            <div class='message'>
            I am still learning. Could you be more specific?

            </div>
            </div>
        `);
	$("#user-input").attr("disabled", false);
	}
else if(sentiment =="positive")
	{
	confidenceMeter +=3;
	challengeQuestionCount++;
	outputArea.append(`
            <div class='user-message'>
            <div class='message'>
           Are you excited to take fifth challenge!!?
            </div>
            </div>
        `);
	$("#user-input").attr("disabled", false);
	
	
	}
else if(sentiment =="negative")
	{
	confidenceMeter +=1;
	outputArea.append(`
            <div class='user-message'>
            <div class='message'>
         Sorry if you didn't like the previous challenge. 	
         We will try to bring more interesting challenges  
            </div>
            </div>
        `);
	outputArea.append(`
            <div class='user-message'>
            <div class='message'>
           Are you excited to take fifth challenge!!?
            </div>
            </div>
        `);
	 $("#user-input").attr("disabled", false);
	 challengeQuestionCount++;
	}
else if(sentiment == "neutral")
	{
	confidenceMeter +=2;
	challengeQuestionCount++;
	outputArea.append(`
            <div class='user-message'>
            <div class='message'>
           Are you excited to take fifth challenge!!?
            </div>
            </div>
        `);
	$("#user-input").attr("disabled", false);
	}
console.log(confidenceMeter);

},
error: function () {
alert("error");
}
})

}
// end of Challenge 4



//Challenge 5

if(challengeQuestionCount == 9)
{
$("#user-input").attr("disabled", true);
var message = $("#user-input").val();
$("#user-input").val("");
outputArea.append(`
    <div class='bot-message'>
    <div class='message'>
        ${message}
    </div>
    </div>
`);



 

$.ajax({
url: 'https://young-cove-81657.herokuapp.com/yesno',
headers: {
'Content-Type': 'application/json',

},
type: "POST", /* or type:"GET" or type:"PUT" */
dataType: "json",
crossDomain: true,
data: JSON.stringify({"text":message }),
success: function (result) {

console.log(result);
var data = result.yesOrNo;
var confidence = result.confidence;

if(confidence == "NA" || confidence <0.5 )
{

outputArea.append(`
     <div class='user-message'>
     <div class='message'>
     I am still learning. Could you be more specific?

     </div>
     </div>
 `);
$("#user-input").attr("disabled", false);
}
else if(data === "Yes") 
	{
	
	
	outputArea.append(`
         <div class='user-message' >
			
         <div class='message' style='background-color: #9ae5e5; color: black;'>
         “The only place where your dream becomes impossible is in your own thinking.” – Robert H Schuller
         <br/><br/>
         Spread a positive message/drawing/song/poem to the world and share the screenshot
         </div>
         <br/><br/>
			<div>
			  <input type="file" id="fileUploadchallengeFive" accept="image/x-png,image/gif,image/jpeg" style="display:none;"> 
			  <button id="buttonChallengeFive">Upload Screenshot/Picture</button>  
			  <span id="fileName"></span>
			</div>
         </div>
     `);
	 
	
	
	}
else if(data === "No")
	{
	
	 outputArea.append(`
             <div class='user-message'>
             <div class='message'>
             Your Welcome  Kindly close the browser
             </div>
             </div>
         `);
	}
else
	{
	 $("#user-input").attr("disabled", false);
	outputArea.append(`
         <div class='user-message'>
         <div class='message'>
         I am still learning. Could you be more specific?

         </div>
         </div>
     `);
	}

},
error: function () {
alert("error");
}
})

}	//question  4
 
 
 
//Question 7
if(challengeQuestionCount == 10)
 {
$("#user-input").attr("disabled", true);
var message = $("#user-input").val();
$("#user-input").val("");
outputArea.append(`
    <div class='bot-message'>
    <div class='message'>
        ${message}
    </div>
    </div>
`);



 

$.ajax({
url: 'https://young-cove-81657.herokuapp.com/sentiment',
headers: {
'Content-Type': 'application/json',

},
type: "POST", /* or type:"GET" or type:"PUT" */
dataType: "json",
crossDomain: true,
data: JSON.stringify({"text":message }),
success: function (result) {

console.log(result);
var confidence = result.confidence;
var sentiment  = result.sentiment;
if(confidence == "N/A" || confidence <0.5 )
	{
	
	outputArea.append(`
            <div class='user-message'>
            <div class='message'>
            I am still learning. Could you be more specific?

            </div>
            </div>
        `);
	$("#user-input").attr("disabled", false);
	}
else if(sentiment =="positive")
	{
	confidenceMeter +=3;
	challengeQuestionCount++;
	outputArea.append(`
            <div class='user-message'>
            <div class='message'>
           Are you excited to take sixth challenge!!?
            </div>
            </div>
        `);
	$("#user-input").attr("disabled", false);
	
	
	}
else if(sentiment =="negative")
	{
	confidenceMeter +=1;
	outputArea.append(`
            <div class='user-message'>
            <div class='message'>
         Sorry if you didn't like the previous challenge. 	
         We will try to bring more interesting challenges  
            </div>
            </div>
        `);
	outputArea.append(`
            <div class='user-message'>
            <div class='message'>
           Are you excited to take sixth challenge!!?
            </div>
            </div>
        `);
	 $("#user-input").attr("disabled", false);
	 challengeQuestionCount++;
	}
else if(sentiment == "neutral")
	{
	confidenceMeter +=2;
	challengeQuestionCount++;
	outputArea.append(`
            <div class='user-message'>
            <div class='message'>
           Are you excited to take sixth challenge!!?
            </div>
            </div>
        `);
	$("#user-input").attr("disabled", false);
	}
console.log(confidenceMeter);

},
error: function () {
alert("error");
}
})

}
// end of Challenge 5

//Challenge 6

if(challengeQuestionCount == 11)
{
$("#user-input").attr("disabled", true);
var message = $("#user-input").val();
$("#user-input").val("");
outputArea.append(`
    <div class='bot-message'>
    <div class='message'>
        ${message}
    </div>
    </div>
`);



 

$.ajax({
url: 'https://young-cove-81657.herokuapp.com/yesno',
headers: {
'Content-Type': 'application/json',

},
type: "POST", /* or type:"GET" or type:"PUT" */
dataType: "json",
crossDomain: true,
data: JSON.stringify({"text":message }),
success: function (result) {

console.log(result);
var data = result.yesOrNo;
var confidence = result.confidence;

if(confidence == "NA" || confidence <0.5 )
{

outputArea.append(`
     <div class='user-message'>
     <div class='message'>
     I am still learning. Could you be more specific?

     </div>
     </div>
 `);
$("#user-input").attr("disabled", false);
}
else if(data === "Yes") 
	{
	
	
	outputArea.append(`
         <div class='user-message'>
			
         <div class='message' style='background-color: #9ae5e5; color: black;'>
         From an early age I understood that cooking was never going to be a job, it’s a passion. – Gordon Ramsay
         <br/><br/>
         Try a new receipe and serve your Friends / Family/ Neighbour and post a picture of the food
         </div>
         <br/><br/>
			<div>
			  <input type="file" id="fileUploadchallengeSix" accept="image/x-png,image/gif,image/jpeg" style="display:none;"> 
			  <button id="buttonChallengeSix">Upload Picture of your Cooking Magic</button>  
			  <span id="fileName"></span>
			</div>
         </div>
     `);
	 
	
	
	}
else if(data === "No")
	{
	
	 outputArea.append(`
             <div class='user-message'>
             <div class='message'>
             Your Welcome  Kindly close the browser
             </div>
             </div>
         `);
	}
else
	{
	 $("#user-input").attr("disabled", false);
	outputArea.append(`
         <div class='user-message'>
         <div class='message'>
         I am still learning. Could you be more specific?

         </div>
         </div>
     `);
	}

},
error: function () {
alert("error");
}
})

}	//question  4
 
 
 
//Question 7
if(challengeQuestionCount == 12)
 {
$("#user-input").attr("disabled", true);
var message = $("#user-input").val();
$("#user-input").val("");
outputArea.append(`
    <div class='bot-message'>
    <div class='message'>
        ${message}
    </div>
    </div>
`);



 

$.ajax({
url: 'https://young-cove-81657.herokuapp.com/sentiment',
headers: {
'Content-Type': 'application/json',

},
type: "POST", /* or type:"GET" or type:"PUT" */
dataType: "json",
crossDomain: true,
data: JSON.stringify({"text":message }),
success: function (result) {

console.log(result);
var confidence = result.confidence;
var sentiment  = result.sentiment;
if(confidence == "N/A" || confidence <0.5 )
	{
	
	outputArea.append(`
            <div class='user-message'>
            <div class='message'>
            I am still learning. Could you be more specific?

            </div>
            </div>
        `);
	$("#user-input").attr("disabled", false);
	}
else if(sentiment =="positive")
	{
	confidenceMeter +=3;
	challengeQuestionCount++;
	outputArea.append(`
            <div class='user-message'>
            <div class='message'>
           Are you excited to take seventh challenge!!?
            </div>
            </div>
        `);
	$("#user-input").attr("disabled", false);
	
	
	}
else if(sentiment =="negative")
	{
	confidenceMeter +=1;
	outputArea.append(`
            <div class='user-message'>
            <div class='message'>
         Sorry if you didn't like the previous challenge. 	
         We will try to bring more interesting challenges  
            </div>
            </div>
        `);
	outputArea.append(`
            <div class='user-message'>
            <div class='message'>
           Are you excited to take seventh challenge!!?
            </div>
            </div>
        `);
	 $("#user-input").attr("disabled", false);
	 challengeQuestionCount++;
	}
else if(sentiment == "neutral")
	{
	confidenceMeter +=2;
	challengeQuestionCount++;
	outputArea.append(`
            <div class='user-message'>
            <div class='message'>
           Are you excited to take seventh challenge!!?
            </div>
            </div>
        `);
	$("#user-input").attr("disabled", false);
	}
console.log(confidenceMeter);

},
error: function () {
alert("error");
}
})

}
// end of Challenge 6





//Challenge 7

if(challengeQuestionCount == 13)
{
$("#user-input").attr("disabled", true);
var message = $("#user-input").val();
$("#user-input").val("");
outputArea.append(`
    <div class='bot-message'>
    <div class='message'>
        ${message}
    </div>
    </div>
`);



 

$.ajax({
url: 'https://young-cove-81657.herokuapp.com/yesno',
headers: {
'Content-Type': 'application/json',

},
type: "POST", /* or type:"GET" or type:"PUT" */
dataType: "json",
crossDomain: true,
data: JSON.stringify({"text":message }),
success: function (result) {

console.log(result);
var data = result.yesOrNo;
var confidence = result.confidence;

if(confidence == "NA" || confidence <0.5 )
{

outputArea.append(`
     <div class='user-message'>
     <div class='message'>
     I am still learning. Could you be more specific?

     </div>
     </div>
 `);
$("#user-input").attr("disabled", false);
}
else if(data === "Yes") 
	{
	
	
	outputArea.append(`
         <div class='user-message'>
			
         <div class='message' style='background-color: #9ae5e5; color: black;'>
         The objective of cleaning is not just to clean, but to feel happiness living within that environment. - Marie Kondo
         <br/><br/>
         Decorate your living room and make it look pleasant and post a picture
         </div>
         <br/><br/>
			<div>
			  <input type="file" id="fileUploadchallengeSeven" accept="image/x-png,image/gif,image/jpeg" style="display:none;"> 
			  <button id="buttonChallengeSeven">Upload picture of your room</button>  
			  <span id="fileName"></span>
			</div>
         </div>
     `);
	 
	
	
	}
else if(data === "No")
	{
	
	 outputArea.append(`
             <div class='user-message'>
             <div class='message'>
             Your Welcome  Kindly close the browser
             </div>
             </div>
         `);
	}
else
	{
	 $("#user-input").attr("disabled", false);
	outputArea.append(`
         <div class='user-message'>
         <div class='message'>
         I am still learning. Could you be more specific?

         </div>
         </div>
     `);
	}

},
error: function () {
alert("error");
}
})

}	
 
if(challengeQuestionCount == 14)
{
$("#user-input").attr("disabled", true);
var message = $("#user-input").val();
$("#user-input").val("");
outputArea.append(`
   <div class='bot-message'>
   <div class='message'>
       ${message}
   </div>
   </div>
`);





$.ajax({
url: 'https://young-cove-81657.herokuapp.com/sentiment',
headers: {
'Content-Type': 'application/json',

},
type: "POST", /* or type:"GET" or type:"PUT" */
dataType: "json",
crossDomain: true,
data: JSON.stringify({"text":message }),
success: function (result) {

console.log(result);
var confidence = result.confidence;
var sentiment  = result.sentiment;
if(confidence == "N/A" || confidence <0.5 )
	{
	
	outputArea.append(`
           <div class='user-message'>
           <div class='message'>
           I am still learning. Could you be more specific?

           </div>
           </div>
       `);
	$("#user-input").attr("disabled", false);
	}
else if(sentiment =="positive")
	{
	confidenceMeter +=3;
	challengeQuestionCount++;
	$("#user-input").attr("disabled", false);
	finalActions();
	
	}
else if(sentiment =="negative")
	{
	confidenceMeter +=1;
	
	 $("#user-input").attr("disabled", false);
	 challengeQuestionCount++;
	 finalActions();
	}
else if(sentiment == "neutral")
	{
	confidenceMeter +=2;
	challengeQuestionCount++;
	
	$("#user-input").attr("disabled", false);
	finalActions();
	}
console.log(confidenceMeter);

},
error: function () {
alert("error");
}
})

} //end of challenge 7
 
function finalActions()
{
	
	confidenceMeter  = Math.round(confidenceMeter*100/21);
	
	var smiley ="";
	if(confidenceMeter>0 && confidenceMeter<=20)
		{
		smiley = "&#128532";
		}
	if(confidenceMeter>20 && confidenceMeter<=40)
	{
		smiley = "&#128522";
	}
	if(confidenceMeter>40 && confidenceMeter<=60)
	{
		smiley = "&#128515";
	}
	if(confidenceMeter>60 && confidenceMeter<=80)
	{
		smiley = "&#128526";
	}
	if(confidenceMeter>80 && confidenceMeter<=100)
	{
		smiley = "&#128525 ";
	}
	
	
	
	
	
	outputArea.append(`
            <div class='user-message'>
			
            <div class='message'>
            We have calculated based on your feedback, your liking for the challenges out of 100 to be 
            </div>
            
            </div> `);
	
	var progressMeter  = '<div><div class="meter"><span  style="color:white;width:'+confidenceMeter+'%;"><span class="progress" align="center"> '+smiley+'  '+confidenceMeter+'%   '+smiley+' </span></span> </div> </div> ';
	outputArea.append(progressMeter);
	  
	outputArea.append(`
                <div class='user-message'>
				
                <div class='message'>
            Thanks for believing in yourself and tried to give us a chance to help you!!!
        You have successfully completed seven days of feel good challenges 
        We hope that these challenges help you understand yourself a bit more and enjoy each and every moment in life.
        Not only that we want to surprise you with some love from us to make your memories of these days beautiful.
                </div>
            
           
            
        <div id="loadingTwo">
    
    <img src="loading.gif" /> 
    	 </div>
    	 
    	 
    	 
    	 
  </div> `);
	
	
	$.ajax({
		url: 'https://young-cove-81657.herokuapp.com/image',
		headers: {
		'Content-Type': 'application/json',

		},
		type: "POST", /* or type:"GET" or type:"PUT" */
		dataType: "json",
		crossDomain: true,
		data: JSON.stringify({"_id":sessionId }),
		success: function (result) {
		
		
		console.log(result);
		
		var jsonData  = new FormData();
		jsonData.append('id', sessionId);
		
		$.ajax({
		    url: "/retreive",
		    type: "POST",
		    crossDomain: true,
		    data: jsonData,
		   
		    processData: false,
		    contentType: false,
		    cache: false,
		    success: function (response) {
		    	var mp4 = "data:video/mp4;base64,";
		    	var webm = "data:video/webm;base64,";
		    	mp4 = mp4 + response;
		    	webm = webm + response;
		    	$("#loadingTwo").attr("style", "display:none");
		    	
		    	 
		    	
		      var video = '<video width="400" controls> <source src = '+webm+'> <source src = '+mp4+'>Your browser does not support HTML video. </video>';
		    outputArea.append(video);
		    outputArea.append(`
		    <a href="http://www.facebook.com/sharer.php?u=https://simplesharebuttons.com" target="_blank">
	        <img src="https://simplesharebuttons.com/images/somacro/facebook.png" alt="Facebook" />Share on Facebook
	    </a>`);
		    	
		    	
		    },
		    error: function () {
		    	alert("error from java endpoint");
		    }
		  });

		},
		error: function () {
		alert("error from flask endpoint");
		}
		})
	
		
}

   
        });
        $(document).on("click", "#buttonChallengeOne" , function() {
        
        
        	
            $("#fileUploadchallengeOne").click();
          });
        $(document).on("change", "#fileUploadchallengeOne" , function() {
       
      
        	
        	 var fileName = $('#fileUploadchallengeOne')[0].files[0].name;
             var idxDot = fileName.lastIndexOf(".") + 1;
             var extFile = fileName.substr(idxDot, fileName.length).toLowerCase();
          
             
           
             
             if (extFile=="jpg" || extFile=="jpeg" || extFile=="png" ||  extFile=="tiff"){
            	 
            	 
            	 
            	 formData.append('file1', $('#fileUploadchallengeOne')[0].files[0]);
            	 
            	 challengeQuestionCount++;
           	  $("#buttonChallengeOne").attr("disabled", true);
    			 outputArea.append(`
   		                <div class='user-message'>
    					<div class='message'>
   		              Uploaded succesfully
   		                </div>
    			 			<br/><br/>
   		                <div class='message'>
   		               What do you feel about challenge 1!!? ,Hey... Hope you liked my first challenge . Let me know about how you felt?

   		                </div>
   		                </div>
   		            `);
    			 $("#user-input").attr("disabled", false);
            	 
    			 
    			 

                
             }else{
                 alert("Only Images files are allowed!");
             }   
        	
        	
        	  //$('#fileName').text($('#fileUploadchallengeOne')[0].files[0].name);
        	 
 			
        	  
        	});
        
        
        
        
   //challenge 2     
	$(document).on("click", "#buttonChallengeTwo" , function() {
        
        
        	
            $("#fileUploadchallengeTwo").click();
          });
        $(document).on("change", "#fileUploadchallengeTwo" , function() {
       
      
        	
        	 var fileName = $('#fileUploadchallengeTwo')[0].files[0].name;
             var idxDot = fileName.lastIndexOf(".") + 1;
             var extFile = fileName.substr(idxDot, fileName.length).toLowerCase();
             
             
           
             
             if (extFile=="jpg" || extFile=="jpeg" || extFile=="png" ||  extFile=="tiff"){
            	 
                        	 
            	 formData.append('file2', $('#fileUploadchallengeTwo')[0].files[0]);
            	 
            	 challengeQuestionCount++;
           	  $("#buttonChallengeTwo").attr("disabled", true);
    			 outputArea.append(`
   		                <div class='user-message'>
    					<div class='message'>
   		              Uploaded succesfully
   		                </div>
    			 			<br/><br/>
   		                <div class='message'>
   		               What do you feel about challenge 2!!? ,Hey... Hope you liked my second challenge . Let me know about how you felt?
   		                </div>
   		                </div>
   		            `);
    			 $("#user-input").attr("disabled", false);
            	 
    			 
    			 

                
             }else{
                 alert("Only Images files are allowed!");
             }   
        	
        	
        	  //$('#fileName').text($('#fileUploadchallengeOne')[0].files[0].name);
        	 
 			
        	  
        	});
        //End of challenge 2 
        
        
        
        
        //challenge 3   
	$(document).on("click", "#buttonChallengeThree" , function() {
        
        
        	
            $("#fileUploadchallengeThree").click();
          });
        $(document).on("change", "#fileUploadchallengeThree" , function() {
       
      
        	
        	 var fileName = $('#fileUploadchallengeThree')[0].files[0].name;
             var idxDot = fileName.lastIndexOf(".") + 1;
             var extFile = fileName.substr(idxDot, fileName.length).toLowerCase();
             
             
           
             
             if (extFile=="jpg" || extFile=="jpeg" || extFile=="png" ||  extFile=="tiff"){
            	 
                        	 
            	 formData.append('file3', $('#fileUploadchallengeThree')[0].files[0]);
            	 
            	 challengeQuestionCount++;
           	  $("#buttonChallengeThree").attr("disabled", true);
    			 outputArea.append(`
   		                <div class='user-message'>
    					<div class='message'>
   		              Uploaded succesfully
   		                </div>
    			 			<br/><br/>
   		                <div class='message'>
   		               What do you feel about challenge 3!!? ,Hey... Hope you liked my third challenge . Let me know about how you felt?
   		                </div>
   		                </div>
   		            `);
    			 $("#user-input").attr("disabled", false);
            	 
    			 
    			 

                
             }else{
                 alert("Only Images files are allowed!");
             }   
        	
        	
        	  //$('#fileName').text($('#fileUploadchallengeOne')[0].files[0].name);
        	 
 			
        	  
        	});
        //End of challenge 3
        
        
        
        //challenge 4   
	$(document).on("click", "#buttonChallengeFour" , function() {
        
        
        	
            $("#fileUploadchallengeFour").click();
          });
        $(document).on("change", "#fileUploadchallengeFour" , function() {
       
      
        	
        	 var fileName = $('#fileUploadchallengeFour')[0].files[0].name;
             var idxDot = fileName.lastIndexOf(".") + 1;
             var extFile = fileName.substr(idxDot, fileName.length).toLowerCase();
             
             
           
             
             if (extFile=="jpg" || extFile=="jpeg" || extFile=="png" ||  extFile=="tiff"){
            	 
                        	 
            	 formData.append('file4', $('#fileUploadchallengeFour')[0].files[0]);
            	 
            	 challengeQuestionCount++;
           	  $("#buttonChallengeFour").attr("disabled", true);
    			 outputArea.append(`
   		                <div class='user-message'>
    					<div class='message'>
   		              Uploaded succesfully
   		                </div>
    			 			<br/><br/>
   		                <div class='message'>
   		               What do you feel about challenge 4!!? ,Hey... Hope you liked my fourth challenge . Let me know about how you felt?
   		                </div>
   		                </div>
   		            `);
    			 $("#user-input").attr("disabled", false);
            	 
    			 
    			 

                
             }else{
                 alert("Only Images files are allowed!");
             }   
        	
        	
        	  //$('#fileName').text($('#fileUploadchallengeOne')[0].files[0].name);
        	 
 			
        	  
        	});
        //End of challenge 4
        
        
        
        //challenge 5   
	$(document).on("click", "#buttonChallengeFive" , function() {
        
        
        	
            $("#fileUploadchallengeFive").click();
          });
        $(document).on("change", "#fileUploadchallengeFive" , function() {
       
      
        	
        	 var fileName = $('#fileUploadchallengeFive')[0].files[0].name;
             var idxDot = fileName.lastIndexOf(".") + 1;
             var extFile = fileName.substr(idxDot, fileName.length).toLowerCase();
             
             
           
             
             if (extFile=="jpg" || extFile=="jpeg" || extFile=="png" ||  extFile=="tiff"){
            	 
                        	 
            	 formData.append('file5', $('#fileUploadchallengeFive')[0].files[0]);
            	 
            	 challengeQuestionCount++;
           	  $("#buttonChallengeFive").attr("disabled", true);
    			 outputArea.append(`
   		                <div class='user-message'>
    					<div class='message'>
   		              Uploaded succesfully
   		                </div>
    			 			<br/><br/>
   		                <div class='message'>
   		               What do you feel about challenge 5!!? ,Hey... Hope you liked my fifth challenge . Let me know about how you felt?
   		                </div>
   		                </div>
   		            `);
    			 $("#user-input").attr("disabled", false);
            	 
    			 
    			 

                
             }else{
                 alert("Only Images files are allowed!");
             }   
        	
        	
        	  //$('#fileName').text($('#fileUploadchallengeOne')[0].files[0].name);
        	 
 			
        	  
        	});
        //End of challenge 5
        
        
        
        //challenge 6  
	$(document).on("click", "#buttonChallengeSix" , function() {
        
        
        	
            $("#fileUploadchallengeSix").click();
          });
        $(document).on("change", "#fileUploadchallengeSix" , function() {
       
      
        	
        	 var fileName = $('#fileUploadchallengeSix')[0].files[0].name;
             var idxDot = fileName.lastIndexOf(".") + 1;
             var extFile = fileName.substr(idxDot, fileName.length).toLowerCase();
             
             
           
             
             if (extFile=="jpg" || extFile=="jpeg" || extFile=="png" ||  extFile=="tiff"){
            	 
                        	 
            	 formData.append('file6', $('#fileUploadchallengeSix')[0].files[0]);
            	 
            	 challengeQuestionCount++;
           	  $("#buttonChallengeSix").attr("disabled", true);
    			 outputArea.append(`
   		                <div class='user-message'>
    					<div class='message'>
   		              Uploaded succesfully
   		                </div>
    			 			<br/><br/>
   		                <div class='message'>
   		               What do you feel about challenge 6!!? ,Hey... Hope you liked my sixth challenge . Let me know about how you felt? 
   		                </div>
   		                </div>
   		            `);
    			 $("#user-input").attr("disabled", false);
            	 
    			 
    			 

                
             }else{
                 alert("Only Images files are allowed!");
             }   
        	
        	
        	  //$('#fileName').text($('#fileUploadchallengeOne')[0].files[0].name);
        	 
 			
        	  
        	});
        //End of challenge 6
        
        
        
          //challenge 7  
	$(document).on("click", "#buttonChallengeSeven" , function() {
        
        
        	
            $("#fileUploadchallengeSeven").click();
          });
        $(document).on("change", "#fileUploadchallengeSeven" , function() {
       
      
        	
        	 var fileName = $('#fileUploadchallengeSeven')[0].files[0].name;
             var idxDot = fileName.lastIndexOf(".") + 1;
             var extFile = fileName.substr(idxDot, fileName.length).toLowerCase();
             
             
           
             
             if (extFile=="jpg" || extFile=="jpeg" || extFile=="png" ||  extFile=="tiff"){
            	 
                        	 
            	 formData.append('file7', $('#fileUploadchallengeSeven')[0].files[0]);
            	 $("#buttonChallengeSeven").attr("disabled", true);
            	 outputArea.append(`
            	 <div id="loading">
            	    
            	    <img src="loading.gif" /> 
            	    	 </div>`);
            	 $.ajax({
         		    url: "/upload",
         		    type: "POST",
         		    data:formData ,
         		   
         		    processData: false,
         		    contentType: false,
         		    cache: false,
         		    success: function (response) {
         		    	
         		    	$("#loading").attr("style", "display:none");
         		    	sessionId = response;
         		    	
         		    	challengeQuestionCount++;
         	           	 
         	    			 outputArea.append(`
         	   		                <div class='user-message'>
         	    					<div class='message'>
         	   		              Uploaded succesfully
         	   		                </div>
         	    			 			<br/><br/>
         	   		                <div class='message'>
         	   		               What do you feel about challenge 7!!? ,Hey... Hope you liked my seventh challenge . Let me know about how you felt?
         	   		                </div>
         	   		                </div>
         	   		            `);
         	    			 $("#user-input").attr("disabled", false);
         	    			
         		    	
         		    },
         		    error: function () {
         		      // Handle upload error
         		      // ...
         		    }
         		  });
            	 
            	 
            	 
    			 
    			 

                
             }else{
                 alert("Only Images files are allowed!");
             }   
        	
        	
        	  //$('#fileName').text($('#fileUploadchallengeOne')[0].files[0].name);
        	 
 			
        	  
        	});
        //End of challenge 7
        
        
    }); 
    </script>
</body>

</html>